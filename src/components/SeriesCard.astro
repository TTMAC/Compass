---
interface Props {
  articleNumber: string;
  title: string;
  sphere: "national" | "provincial" | "municipal";
  readingTime: number;
  status: "published" | "draft" | "coming-soon";
  slug: string;
}

const { articleNumber, title, sphere, readingTime, status, slug } = Astro.props;

const sphereColors: Record<string, string> = {
  national: "bg-sphere-national",
  provincial: "bg-sphere-provincial",
  municipal: "bg-sphere-municipal",
};

const isClickable = status === "published";
---

<a
  href={isClickable ? `/articles/${slug}` : undefined}
  class={`block border border-gray-200 rounded-lg p-4 transition-colors ${
    isClickable
      ? "hover:border-compass-green cursor-pointer"
      : "opacity-60 cursor-default"
  }`}
  data-testid="series-card"
>
  <div class="flex items-start justify-between gap-4">
    <div>
      <div class="flex items-center gap-2 mb-1">
        <span class="font-heading text-xs text-text-secondary">
          {articleNumber}
        </span>
        <span
          class={`inline-block px-1.5 py-0.5 text-[10px] font-heading font-semibold text-white rounded ${sphereColors[sphere]}`}
        >
          {sphere.charAt(0).toUpperCase() + sphere.slice(1)}
        </span>
        {
          status === "coming-soon" && (
            <span class="text-[10px] font-heading text-text-secondary bg-bg-secondary px-1.5 py-0.5 rounded">
              Coming soon
            </span>
          )
        }
      </div>
      <h3 class="font-heading text-base font-semibold text-text-primary">
        {title}
      </h3>
    </div>
    {
      isClickable && (
        <span class="font-heading text-xs text-text-secondary whitespace-nowrap">
          {readingTime} min
        </span>
      )
    }
  </div>
</a>
